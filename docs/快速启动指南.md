# å¿«é€Ÿå¯åŠ¨æŒ‡å—

æœ¬æŒ‡å—å¸®åŠ©ä½ ä»é›¶å¼€å§‹è¿è¡Œ Tableau å…ƒæ•°æ®æ²»ç†å¹³å°ã€‚

---

## ğŸ“‹ å‰ç½®æ¡ä»¶

| ä¾èµ–    | ç‰ˆæœ¬è¦æ±‚ | æ£€æŸ¥å‘½ä»¤            |
| ------- | -------- | ------------------- |
| Python  | 3.10+    | `python3 --version` |
| Node.js | 18+      | `node --version`    |
| npm     | 9+       | `npm --version`     |

---

## ğŸš€ é¦–æ¬¡å®‰è£…

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd metadata
```

### 2. åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # macOS/Linux
# æˆ– Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd frontend
npm install
cd ..
```

### 4. é…ç½® Tableau è¿æ¥

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š

```bash
cat > .env << EOF
TABLEAU_BASE_URL=http://your-tableau-server.com
TABLEAU_PAT_NAME=your_pat_name
TABLEAU_PAT_SECRET=your_pat_secret
EOF
```

> **è·å– PAT**: ç™»å½• Tableau Server â†’ è®¾ç½® â†’ ä¸ªäººè®¿é—®ä»¤ç‰Œ â†’ åˆ›å»ºæ–°ä»¤ç‰Œ

### 5. é¦–æ¬¡æ•°æ®åŒæ­¥

```bash
venv/bin/python backend/tableau_sync.py
```

åŒæ­¥å®Œæˆåä¼šåœ¨ `data/metadata.db` ç”Ÿæˆæ•°æ®åº“æ–‡ä»¶ã€‚

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²ï¼ˆæ¨è âœ¨ï¼‰

å¦‚æœæ‚¨å®‰è£…äº† Docker å’Œ Docker Composeï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ä¸€é”®éƒ¨ç½²ï¼š

```bash
# 1. å‡†å¤‡é…ç½®
cp .env.example .env  # å¹¶ç¼–è¾‘ .env å¡«å…¥ Tableau å‡­æ®

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. è®¿é—®
# å‰ç«¯ï¼šhttp://localhost:3201
# åç«¯ APIï¼šhttp://localhost:8202/api
```

> ğŸ’¡ è¯¦ç»† Docker é…ç½®å’Œä¼˜åŒ–è¯·å‚è€ƒ [Docker éƒ¨ç½²æ–‡æ¡£](DOCKER_DEPLOY.md)ã€‚

---

## ğŸ¯ å¯åŠ¨æœåŠ¡

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# å¼€å‘æ¨¡å¼ - å®æ—¶ç¼–è¯‘ï¼Œé€‚åˆå¼€å‘è°ƒè¯•
venv/bin/python dev.py

# ç”Ÿäº§æ¨¡å¼ - é¢„ç¼–è¯‘ï¼Œé€‚åˆå†…ç½‘éƒ¨ç½²
venv/bin/python deploy.py
```

### æ–¹å¼äºŒï¼šåˆ†æ­¥å¯åŠ¨

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯
venv/bin/python run_backend.py

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯
cd frontend && npm run dev
```

### è®¿é—®åœ°å€

| æœåŠ¡         | åœ°å€                      | è¯´æ˜       |
| ------------ | ------------------------- | ---------- |
| **å‰ç«¯é¡µé¢** | http://localhost:3200     | ä¸»è¦ä½¿ç”¨ â­ |
| åç«¯ API     | http://localhost:8201/api | Flask API  |

---

## âœ… éªŒè¯å®‰è£…

### 1. æ£€æŸ¥åç«¯

```bash
curl http://localhost:8201/api/stats
```

é¢„æœŸè¿”å› JSON æ•°æ®ï¼ŒåŒ…å«æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯ã€‚

### 2. æ£€æŸ¥å‰ç«¯

è®¿é—® http://localhost:3200ï¼Œåº”çœ‹åˆ°é¦–é¡µä»ªè¡¨æ¿ã€‚

### 3. è¿è¡Œæµ‹è¯•

```bash
# åŸºç¡€æµ‹è¯•ï¼ˆ12é¡¹ï¼‰
node tests/e2e/test-e2e.mjs

# åŠŸèƒ½æµ‹è¯•ï¼ˆ27é¡¹ï¼‰
node tests/e2e/test-features.mjs
```

é¢„æœŸç»“æœï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ŒæˆåŠŸç‡ 100%ã€‚

---

## ğŸ“± æ ¸å¿ƒé¡µé¢

| é¡µé¢     | URL                               | åŠŸèƒ½               |
| -------- | --------------------------------- | ------------------ |
| é¦–é¡µ     | http://localhost:3200/            | æ²»ç†å¥åº·åˆ†æä»ªè¡¨æ¿ |
| å­—æ®µå­—å…¸ | http://localhost:3200/fields      | åŸå§‹å­—æ®µåˆ—è¡¨       |
| æŒ‡æ ‡åº“   | http://localhost:3200/metrics     | è®¡ç®—å­—æ®µ/æŒ‡æ ‡      |
| æ•°æ®è¡¨   | http://localhost:3200/tables      | ç‰©ç†è¡¨åˆ—è¡¨         |
| æ•°æ®æº   | http://localhost:3200/datasources | Tableau æ•°æ®æº     |
| å·¥ä½œç°¿   | http://localhost:3200/workbooks   | Tableau å·¥ä½œç°¿     |
| è§†å›¾     | http://localhost:3200/views       | è§†å›¾/ä»ªè¡¨æ¿        |
| æœ¯è¯­è¡¨   | http://localhost:3200/glossary    | ä¸šåŠ¡æœ¯è¯­å®šä¹‰       |

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# åœæ­¢æœåŠ¡
venv/bin/python dev.py stop

# é‡å¯æœåŠ¡
venv/bin/python dev.py restart
```

### æ•°æ®åŒæ­¥

```bash
# å®Œæ•´åŒæ­¥
venv/bin/python backend/tableau_sync.py

# è·³è¿‡ä½¿ç”¨ç»Ÿè®¡ï¼ˆæ›´å¿«ï¼‰
venv/bin/python backend/tableau_sync.py --skip-usage

# ä»…åŒæ­¥ä½¿ç”¨ç»Ÿè®¡
venv/bin/python backend/tableau_sync.py --usage-only
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ç«¯å£
lsof -i :3200

# å¦‚æœæ— è¾“å‡ºï¼Œå¯åŠ¨å‰ç«¯
cd frontend && npm run dev
```

### Q2: åç«¯ API é”™è¯¯

```bash
# æ£€æŸ¥åç«¯
curl http://localhost:8201/api/stats

# å¦‚æœæ— å“åº”ï¼Œå¯åŠ¨åç«¯
venv/bin/python run_backend.py
```

### Q3: æ•°æ®åº“ä¸å­˜åœ¨

```bash
# åˆå§‹åŒ–æ•°æ®åº“
venv/bin/python backend/init_db.py

# ç„¶åæ‰§è¡ŒåŒæ­¥
venv/bin/python backend/tableau_sync.py
```

### Q4: ä¾èµ–å®‰è£…å¤±è´¥

```bash
# ç¡®ä¿æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# é‡æ–°å®‰è£…
pip install -r requirements.txt
```

### Q5: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i :3200
lsof -i :8201

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨åœæ­¢å‘½ä»¤
venv/bin/python dev.py stop
```

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
metadata/
â”œâ”€â”€ frontend/           # Next.js å‰ç«¯
â”œâ”€â”€ backend/            # Flask åç«¯
â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ models.py       # æ•°æ®æ¨¡å‹
â”œâ”€â”€ data/               # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ tests/              # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ docs/               # æ–‡æ¡£
â”œâ”€â”€ venv/               # Python è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ dev.py              # å¼€å‘å¯åŠ¨è„šæœ¬
â”œâ”€â”€ deploy.py           # ç”Ÿäº§éƒ¨ç½²è„šæœ¬
â””â”€â”€ requirements.txt    # Python ä¾èµ–
```

---

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹ `AGENTS.md` - é¡¹ç›®æ–‡æ¡£ & AI åŠ©æ‰‹è§„èŒƒ
- æŸ¥çœ‹ `docs/` ç›®å½• - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å° - å‰ç«¯é”™è¯¯
- æŸ¥çœ‹ç»ˆç«¯è¾“å‡º - åç«¯é”™è¯¯

---

**æ–‡æ¡£æ›´æ–°**: 2026-01-05
**ç³»ç»ŸçŠ¶æ€**: âœ… å·²å°±ç»ª
