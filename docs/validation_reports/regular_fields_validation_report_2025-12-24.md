# 原始字段(实例) 验证分析报告

**执行时间**: 2025-12-24 23:40
**验证状态**: ❌ 失败 (多项关键指标异常)

## 一、执行摘要

| 验证类别     | 通过项 | 异常项 | 通过率 |
| :----------- | :----: | :----: | :----: |
| 核心属性验证 |   1    |   3    |  25%   |
| 血缘质量检测 |   1    |   3    |  25%   |
| 关联元素验证 |   1    |   4    |  20%   |
| 前端元素对齐 |   0    |   3    |   0%   |
| 逻辑闭环验证 |   1    |   4    |  20%   |

## 二、问题详情

### 2.1 [重大异常]: 关键元数据属性严重缺失

**状态**: 
- `role` (角色): 10059/15298 (66%) 缺失。
- `data_type` (数据类型): 15298/15298 (100%) 全部缺失。

**根因分析**:
在 `backend/tableau_sync.py` 的 `fetch_fields` 逻辑中，由于使用的 GraphQL 对象类型（可能仅为 `ColumnField`）不包含这些字段，或者 API 返回了错误格式，导致入库时全部被设为 NULL。

### 2.2 [血缘断链]: 原始字段大规模失去上游关联 (70%)

**状态**:
- 无表关联: 10582 (69%)。
- 无列关联: 10640 (70%)。

**逻辑结果**:
这导致系统无法从"工作表/数据源"追溯到最底层的"物理数据库表/列"，血缘路径在数据源层发生了断裂。

## 三、修复建议

### 3.1 [修复]: 重构字段采集 GraphQL 查询

**修复方案**:
1. 在 `backend/tableau_sync.py` 中，使用 `... on DatasourceField` 和 `... on CalculatedField` 片段来获取完整的 `role`, `dataType` 等属性。
2. 修复 `upstreamColumns` 的采集逻辑，确保每个 `Field` 都能关联到对应的 `DBColumn`。

## 四、修复执行记录

无
