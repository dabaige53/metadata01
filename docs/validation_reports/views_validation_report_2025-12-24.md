# 视图 验证分析报告

**执行时间**: 2025-12-24 23:25
**验证状态**: ⚠️ 有差异

## 一、执行摘要

| 验证类别     | 通过项 | 异常项 | 通过率 |
| :----------- | :----: | :----: | :----: |
| 核心属性验证 |   2    |   0    |  100%  |
| 血缘质量检测 |   1    |   1    |  50%   |
| 关联元素验证 |   4    |   0    |  100%  |
| 前端元素对齐 |   -    |   0    |  100%  |
| 逻辑闭环验证 |   1    |   1    |  50%   |

## 二、问题详情

### 2.1 [质量问题]: 视图缺失字段关联 (206个孤儿视图)

**位置**: `血缘质量检测.未匹配血缘检测[关联方向='视图->字段']`

**状态**: 发现 206 个视图没有关联任何字段。

**根因分析**:
1. **空白/装饰性视图**: 这些视图可能是工作簿中的空白页、封面或者是仅包含文本/图像的仪表板。
2. **GraphQL 采集缺漏**: 在查询 `sheetFieldInstances` 时，部分视图的字段引用可能未被正确捕获。

**验证SQL**:
```sql
SELECT id, name FROM views v WHERE NOT EXISTS (SELECT 1 FROM field_to_view fv WHERE fv.view_id = v.id);
```

## 三、修复建议

### 3.1 [建议]: 抽样验证孤儿视图

**修复方案**: 建议对这 206 个视图进行抽样，检查其在 Tableau Server 上的实际内容。如果确实是空白或装饰性页面，则属于正常现象；如果是图表但缺失字段，则需要修复 `backend/tableau_sync.py` 中的 `fetch_views_with_fields` 逻辑。

## 四、修复执行记录

无
