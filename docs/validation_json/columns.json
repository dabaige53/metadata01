{
    "数据列": {
        "任务描述": "验证数据列模块的核心指标、血缘关联及数据质量",
        "显示名称": "数据列",
        "模块定义": {
            "数据库表": "db_columns",
            "主键": "id"
        },
        "核心属性验证": {
            "任务描述": "验证数据列的基础属性统计",
            "资产总数": {
                "任务描述": "统计数据列总记录数",
                "SQL查询": "SELECT COUNT(*) FROM db_columns",
                "SQL实际结果": ""
            },
            "按表类型分布 (枚举)": {
                "任务描述": "验证数据列在物理表/嵌入表中的分布",
                "SQL查询": "SELECT CASE WHEN t.is_embedded = 1 THEN 'embedded' ELSE 'physical' END || ':' || COUNT(*) FROM db_columns c JOIN tables t ON c.table_id = t.id GROUP BY t.is_embedded",
                "SQL实际分布": ""
            }
        },
        "血缘质量检测": {
            "任务描述": "根据血缘交叉表4.4(项11-13)检测数据列的血缘完整性",
            "血缘交叉表对应项": [
                "11.数据列→物理表",
                "12.数据列→嵌入表",
                "13.数据列→字段"
            ],
            "关键字段空值检测": [
                {
                    "字段名": "table_id",
                    "任务描述": "检测没有关联表的数据列数量（孤儿列）",
                    "SQL查询": "SELECT COUNT(*) FROM db_columns WHERE table_id IS NULL",
                    "SQL实际结果": ""
                }
            ],
            "血缘覆盖检测": [
                {
                    "检测项": "11.数据列→物理表",
                    "主口径SQL": "SELECT COUNT(*) FROM db_columns c JOIN tables t ON c.table_id = t.id WHERE t.is_embedded = 0",
                    "交叉验证SQL": "SELECT COUNT(DISTINCT c.id) FROM db_columns c WHERE EXISTS (SELECT 1 FROM tables t WHERE t.id = c.table_id AND t.is_embedded = 0)",
                    "主口径结果": "",
                    "交叉结果": "",
                    "预期规则": "cross = main"
                },
                {
                    "检测项": "12.数据列→嵌入表",
                    "主口径SQL": "SELECT COUNT(*) FROM db_columns c JOIN tables t ON c.table_id = t.id WHERE t.is_embedded = 1",
                    "交叉验证SQL": "SELECT COUNT(DISTINCT c.id) FROM db_columns c WHERE EXISTS (SELECT 1 FROM tables t WHERE t.id = c.table_id AND t.is_embedded = 1)",
                    "主口径结果": "",
                    "交叉结果": "",
                    "预期规则": "cross = main"
                },
                {
                    "检测项": "13.数据列→字段",
                    "主口径SQL": "SELECT COUNT(DISTINCT c.id) FROM db_columns c",
                    "交叉验证SQL": "SELECT COUNT(DISTINCT f.upstream_column_id) FROM fields f WHERE f.upstream_column_id IS NOT NULL",
                    "主口径结果": "",
                    "交叉结果": "",
                    "预期规则": "描述被字段引用的数据列数量"
                }
            ],
            "未匹配血缘检测": [
                {
                    "关联方向": "数据列->字段",
                    "任务描述": "检测没有被任何字段引用的数据列数量（未使用列）",
                    "SQL查询": "SELECT COUNT(*) FROM db_columns c WHERE NOT EXISTS (SELECT 1 FROM fields f WHERE f.upstream_column_id = c.id)",
                    "SQL实际结果": ""
                }
            ]
        },
        "关联元素": [
            {
                "目标模块": "物理表",
                "任务描述": "验证数据列与物理表的 N:1 所属关系",
                "关联方式": "数据列 > 物理表 (所属表)",
                "血缘交叉表项": "项11",
                "关联验证": {
                    "正向SQL (列>物理表)": "SELECT COUNT(DISTINCT c.id) || ':' || COUNT(DISTINCT c.table_id) FROM db_columns c JOIN tables t ON c.table_id = t.id WHERE t.is_embedded = 0",
                    "正向SQL结果": "",
                    "反向SQL (物理表>列)": "SELECT COUNT(DISTINCT t.id) || ':' || COUNT(DISTINCT c.id) FROM tables t JOIN db_columns c ON t.id = c.table_id WHERE t.is_embedded = 0",
                    "反向SQL结果": ""
                }
            },
            {
                "目标模块": "嵌入表",
                "任务描述": "验证数据列与嵌入表的 N:1 所属关系",
                "关联方式": "数据列 > 嵌入表 (所属表)",
                "血缘交叉表项": "项12",
                "关联验证": {
                    "正向SQL (列>嵌入表)": "SELECT COUNT(DISTINCT c.id) || ':' || COUNT(DISTINCT c.table_id) FROM db_columns c JOIN tables t ON c.table_id = t.id WHERE t.is_embedded = 1",
                    "正向SQL结果": "",
                    "反向SQL (嵌入表>列)": "SELECT COUNT(DISTINCT t.id) || ':' || COUNT(DISTINCT c.id) FROM tables t JOIN db_columns c ON t.id = c.table_id WHERE t.is_embedded = 1",
                    "反向SQL结果": ""
                }
            },
            {
                "目标模块": "字段",
                "任务描述": "验证数据列被字段引用的 1:N 关系",
                "关联方式": "数据列 > 字段 (上游列)",
                "血缘交叉表项": "项13",
                "关联验证": {
                    "正向SQL (列>字段)": "SELECT COUNT(DISTINCT c.id) || ':' || COUNT(DISTINCT f.id) FROM db_columns c JOIN fields f ON c.id = f.upstream_column_id",
                    "正向SQL结果": "",
                    "反向SQL (字段>列)": "SELECT COUNT(DISTINCT f.id) || ':' || COUNT(DISTINCT f.upstream_column_id) FROM fields f WHERE f.upstream_column_id IS NOT NULL",
                    "反向SQL结果": ""
                }
            }
        ],
        "前端元素对齐": {
            "任务描述": "数据列无独立前端页面，通过表详情页的'原始列' Tab 展示",
            "详情页引用": {
                "父模块": "数据表 (Tables)",
                "Tab名称": "原始列 (N)",
                "API路径": "/api/tables/{id}",
                "API取值键": "columns"
            }
        },
        "逻辑闭环验证": {
            "任务描述": "验证血缘交叉表项11-13的一致性",
            "比对项列表": [
                {
                    "比对名称": "物理表列数闭环",
                    "前端数据源": "关联元素[目标模块='物理表'].关联验证.正向SQL结果",
                    "血缘数据源": "血缘质量检测.血缘覆盖检测[项11].主口径结果",
                    "比对逻辑": "数值相等",
                    "差异容忍度": 0
                }
            ]
        },
        "卡片详情一致性验证": {
            "任务描述": "数据列通过表详情页的'原始列' Tab 展示，无独立卡片",
            "验证项列表": [],
            "备注": "数据列不在列表中独立展示，其统计由父级物理表详情页的'原始列' Tab 呈现，无需卡片详情一致性验证"
        }
    }
}